<mat-card>
    <form class="checkout-form"
          [formGroup]="checkoutFormModel" autocomplete="off" (submit)="onSubmit()">
        <div class="checkout-form__flex">
            <div class="checkout-form__side">
                <fieldset class="checkout__fieldset" formGroupName="customer">
                    <legend>Customer</legend>
<!--                    <mat-form-field appearance="outline">-->
<!--                        <mat-label>First name</mat-label>-->
<!--                        <input matInput formControlName="firstName">-->
<!--                        <mat-error-->
<!--                                *ngIf="checkoutFormModel.get('customer.firstName')?.touched && checkoutFormModel.get('customer.firstName')?.errors?.required">-->
<!--                            First name is <strong>required</strong>-->
<!--                        </mat-error>-->
<!--                        <mat-error-->
<!--                                *ngIf="checkoutFormModel.get('customer.firstName')?.touched && checkoutFormModel.get('customer.firstName')?.errors?.notOnlyWhitespace">-->
<!--                            Spaces only are not allowed-->
<!--                        </mat-error>-->
<!--                    </mat-form-field>-->
<!--                    <mat-form-field appearance="outline">-->
<!--                        <mat-label>Last name</mat-label>-->
<!--                        <input matInput formControlName="lastName">-->
<!--                        <mat-error-->
<!--                                *ngIf="checkoutFormModel.get('customer.lastName')?.touched && checkoutFormModel.get('customer.lastName')?.errors?.required">-->
<!--                            Last name is <strong>required</strong>-->
<!--                        </mat-error>-->
<!--                        <mat-error-->
<!--                                *ngIf="checkoutFormModel.get('customer.lastName')?.touched && checkoutFormModel.get('customer.lastName')?.errors?.notOnlyWhitespace">-->
<!--                            Spaces only are not allowed-->
<!--                        </mat-error>-->
<!--                    </mat-form-field>-->
                    <mat-form-field appearance="outline">
                        <mat-label>Email</mat-label>
                        <input matInput formControlName="email">
                        <mat-error
                                *ngIf="checkoutFormModel.get('customer.email')?.touched && checkoutFormModel.get('customer.email')?.errors?.pattern">
                            Please enter a valid email address
                        </mat-error>
                        <mat-error
                                *ngIf="checkoutFormModel.get('customer.email')?.touched && checkoutFormModel.get('customer.email')?.errors?.required">
                            Email is <strong>required</strong>
                        </mat-error>
                    </mat-form-field>
                </fieldset>

                <fieldset class="checkout__fieldset" formGroupName="creditCard">
                    <legend>Credit card</legend>

                    <mat-form-field appearance="outline">
                        <mat-label>Card type</mat-label>
                        <mat-select formControlName="type">
                            <mat-option *ngFor="let cardType of cardTypes" [value]="cardType.value">
                                {{cardType.viewValue}}
                            </mat-option>
                        </mat-select>
                        <mat-error
                                *ngIf="checkoutFormModel.get('creditCard.type')?.touched && checkoutFormModel.get('creditCard.type')?.errors?.required">
                            Card type is <strong>required</strong></mat-error>
                    </mat-form-field>
                    <mat-form-field appearance="outline">
                        <mat-label>Card number</mat-label>
                        <input matInput formControlName="number">
                        <mat-error
                                *ngIf="checkoutFormModel.get('creditCard.number')?.touched && checkoutFormModel.get('creditCard.number')?.errors?.required">
                            Card number is <strong>required</strong></mat-error>
                        <mat-error
                                *ngIf="checkoutFormModel.get('creditCard.number')?.touched && checkoutFormModel.get('creditCard.number')?.errors?.pattern">
                            Card number must consist of <strong>16</strong> numbers
                        </mat-error>
                    </mat-form-field>
                    <mat-form-field appearance="outline">
                        <mat-label>Security code</mat-label>
                        <input matInput formControlName="code">
                        <mat-error
                                *ngIf="checkoutFormModel.get('creditCard.code')?.touched && checkoutFormModel.get('creditCard.code')?.errors?.required">
                            Security code is <strong>required</strong></mat-error>
                        <mat-error
                                *ngIf="checkoutFormModel.get('creditCard.code')?.touched && checkoutFormModel.get('creditCard.number')?.errors?.pattern">
                            Security code must consist of <strong>3</strong> numbers
                        </mat-error>
                    </mat-form-field>
                    <mat-form-field appearance="outline">
                        <mat-label>Expiration month</mat-label>
                        <mat-select formControlName="expMonth">
                            <mat-option *ngFor="let month of creditCardMonths" [value]="month">
                                {{month < 10 ? '0' + month : month}}
                            </mat-option>
                        </mat-select>
                        <mat-error
                                *ngIf="checkoutFormModel.get('creditCard.expMonth')?.touched && checkoutFormModel.get('creditCard.expMonth')?.errors?.required">
                            Expiration month is <strong>required</strong></mat-error>
                    </mat-form-field>
                    <mat-form-field appearance="outline">
                        <mat-label>Expiration year</mat-label>
                        <mat-select formControlName="expYear">
                            <mat-option *ngFor="let year of creditCardYears" [value]="year">
                                {{year}}
                            </mat-option>
                        </mat-select>
                        <mat-error
                                *ngIf="checkoutFormModel.get('creditCard.expYear')?.touched && checkoutFormModel.get('creditCard.expYear')?.errors?.required">
                            Expiration year is <strong>required</strong></mat-error>
                    </mat-form-field>
                </fieldset>
            </div>

            <div class="checkout-form__side">
                <fieldset class="checkout__fieldset" formGroupName="shippingAddress">
                    <legend>Shipping address</legend>
                    <mat-form-field appearance="outline">
                        <mat-label>Apartment</mat-label>
                        <input matInput formControlName="apartment">
                        <mat-error
                                *ngIf="checkoutFormModel.get('shippingAddress.apartment')?.touched && checkoutFormModel.get('shippingAddress.apartment')?.errors?.required">
                            Apartment is <strong>required</strong></mat-error>
                    </mat-form-field>
                    <mat-form-field appearance="outline">
                        <mat-label>Street</mat-label>
                        <input matInput formControlName="street">
                        <mat-error
                                *ngIf="checkoutFormModel.get('shippingAddress.street')?.touched && checkoutFormModel.get('shippingAddress.street')?.errors?.required">
                            Street is <strong>required</strong></mat-error>
                    </mat-form-field>
                    <mat-form-field appearance="outline">
                        <mat-label>City</mat-label>
                        <input matInput formControlName="city">
                        <mat-error
                                *ngIf="checkoutFormModel.get('shippingAddress.city')?.touched && checkoutFormModel.get('shippingAddress.city')?.errors?.required">
                            City is <strong>required</strong></mat-error>
                    </mat-form-field>
                    <mat-form-field appearance="outline">
                        <mat-label>Country</mat-label>
                        <input matInput formControlName="country">
                        <mat-error
                                *ngIf="checkoutFormModel.get('shippingAddress.country')?.touched && checkoutFormModel.get('shippingAddress.country')?.errors?.required">
                            First name is <strong>required</strong></mat-error>
                    </mat-form-field>
                    <mat-form-field appearance="outline">
                        <mat-label>State</mat-label>
                        <input matInput formControlName="state">
                    </mat-form-field>
                    <mat-form-field appearance="outline">
                        <mat-label>Zip code</mat-label>
                        <input matInput formControlName="zip">
                        <mat-error
                                *ngIf="checkoutFormModel.get('shippingAddress.zip')?.touched && checkoutFormModel.get('shippingAddress.zip')?.errors?.required">
                            Zip code is <strong>required</strong></mat-error>
                    </mat-form-field>
                </fieldset>
                <fieldset class="checkout__fieldset">
                    <legend>Order review</legend>
                    <div class="checkout__totals"><span
                            class="checkout__totals-text">Total quantity:</span><span><b>{{totalQuantity}}</b></span>
                    </div>
                    <div class="checkout__totals"><span
                            class="checkout__totals-text">Total price:</span><span><b>{{totalPrice | currency}}</b></span>
                    </div>
                </fieldset>
            </div>
        </div>

        <button type="submit" mat-raised-button color="primary" class="submit-button"
                [disabled]="!checkoutFormModel.valid">Purchase
        </button>
    </form>
</mat-card>